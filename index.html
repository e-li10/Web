<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Eric Li</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400&display=swap" rel="stylesheet">

  <link rel="preload" as="image" href="https://ids.si.edu/ids/deliveryService?id=SAAM-1967.107.2_1&max=960">

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{--ink:#000;--stack:680px;--top:35px}
    body{font-family:'Cormorant Garamond',serif;color:var(--ink);text-align:center;line-height:1.45;opacity:0;animation:fade .4s ease forwards}
    main{width:var(--stack);margin:var(--top) auto 0}
    #hero{width:129px;height:190px;object-fit:cover;display:block;margin:0 auto 5px}
    h1{font-weight:400;font-size:32px;margin-bottom:8px}
    #links{display:flex;justify-content:center;gap:2em;font-size:16px;font-weight:400;margin-bottom:15px}
    .divider{width:70%;margin:6px auto 0;border:none;border-top:1px solid var(--ink)}
    #clock{position:fixed;top:12px;right:16px;font:400 16px 'Cormorant Garamond',serif;color:var(--ink)}

    #ticker{position:fixed;inset:0;pointer-events:none;z-index:5}
    .quote{position:fixed;font:400 12px 'Cormorant Garamond',serif;letter-spacing:.03em;color:var(--ink);animation:fadeCycle 6s ease-out forwards;white-space:nowrap;user-select:none;background:rgba(255,255,255,.28);backdrop-filter:blur(5px);padding:.23em .55em;border-radius:4px;text-shadow:0 1px 3px rgba(0,0,0,.18)}

    @keyframes fade{to{opacity:1}}
    @keyframes fadeCycle{0%{opacity:0;transform:translateY(4px)}12%{opacity:1;transform:translateY(0)}85%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(-4px)}}

    h1 a,#links a{color:var(--ink)!important;text-decoration:none!important}
  </style>
</head>
<body>
  <time id="clock" aria-label="Current time" datetime=""></time>

  <main>
    <img id="hero" src="https://ids.si.edu/ids/deliveryService?id=SAAM-1967.107.2_1&max=960" alt="Louis Lozowick, New York (1923)">
    <h1><a href="https://www.linkedin.com/in/eric-li-226850249/" target="_blank" rel="noopener">Eric Li</a></h1>
    <div id="links"><a href="thoughts.html">Thoughts</a><a href="mailto:eric_li1@college.harvard.edu">Contact</a></div>
    <hr class="divider">
    <div id="ticker" aria-hidden="true"></div>
  </main>

  <script>
    const clk=document.getElementById('clock');
    function tick(){const now=new Date();clk.textContent=new Intl.DateTimeFormat('en-US',{timeZone:'America/New_York',hour12:false,hour:'2-digit',minute:'2-digit',second:'2-digit'}).format(now);clk.dateTime=now.toISOString()}
    tick();
    setInterval(tick,1000);
  </script>

  <script>
  (function(){
    const icon=document.createElement('link');icon.rel='icon';icon.type='image/png';icon.sizes='16x16';document.head.appendChild(icon);

    const cvs=document.createElement('canvas');cvs.width=cvs.height=16;const ctx=cvs.getContext('2d');ctx.translate(2,0);

    const INTERVAL=60,LIFETIME=180,SEED_COUNT=4,MIRROR_Y=true,MIRROR_X=false;
    const rnd=n=>Math.floor(Math.random()*n);
    const key=(x,y)=>(y<<4)|x;

    let pixels=new Set();
    let frame=0;
    let start=Date.now();

    function add(x,y){pixels.add(key(x,y));if(MIRROR_Y)pixels.add(key(x,15-y));if(MIRROR_X)pixels.add(key(15-x,y));if(MIRROR_Y&&MIRROR_X)pixels.add(key(15-x,15-y))}
    function seed(){pixels.clear();for(let i=0;i<SEED_COUNT;i++)add(rnd(8),rnd(8))}
    function grow(){const arr=[...pixels];if(!arr.length)return;const p=arr[rnd(arr.length)];const ox=p&15,oy=p>>4;const dir=[[1,0],[-1,0],[0,1],[0,-1]][rnd(4)];const nx=ox+dir[0],ny=oy+dir[1];if(nx<0||nx>15||ny<0||ny>15)return;add(nx,ny)}
    function draw(){ctx.clearRect(0,0,16,16);ctx.fillStyle='#000';pixels.forEach(p=>ctx.fillRect(p&15,p>>4,1,1));icon.href=cvs.toDataURL('image/png')}

    function advance(steps){for(let i=0;i<steps;i++){if(frame===0)seed();if(frame<LIFETIME)grow();frame=(frame+1)%(LIFETIME+1)}}

    function loop(){const now=Date.now();const target=Math.floor((now-start)/INTERVAL);const needed=target-frame;if(needed>0)advance(Math.min(needed,200));draw()}

    loop();
    setInterval(loop,INTERVAL);
  })();
  </script>

  <script>
  (function(){
    const box=document.getElementById('ticker');
    const fmt=n=>n.toLocaleString('en-US',{style:'currency',currency:'USD',maximumFractionDigits:2});
    function isJunk(sym){sym=sym.toUpperCase();if(sym.includes('USD')||sym.includes('-'))return true;if(sym.startsWith('W')||sym.startsWith('ST'))return true;if(/^(DAI|FRAX|LUSD|SUSD|GUSD|PYUSD|USDP|CBBTC)$/.test(sym))return true;return false}
    let coins=[],priceMap={},lastFetch=0;
    async function refresh(){const now=Date.now();if(now-lastFetch<60000&&coins.length)return;try{const r=await fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=50&page=1&sparkline=false');if(!r.ok)throw new Error('list');const rows=await r.json();coins=rows.filter(c=>!isJunk(c.symbol)).slice(0,40).map(c=>({id:c.id,sym:c.symbol.toUpperCase()}));const ids=coins.map(c=>c.id).join(',');const p=await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd`);if(!p.ok)throw new Error('prices');priceMap=await p.json();lastFetch=now}catch{if(!coins.length)coins=[{id:'bitcoin',sym:'BTC'},{id:'ethereum',sym:'ETH'}]}}
    function safe(){const vw=window.innerWidth,vh=window.innerHeight,margin=24,label=120,maxX=Math.max(0,vw-2*margin-label),maxY=Math.max(0,vh-2*margin-40);const hero=680,gap=80;const left=(vw-hero)/2-gap,right=(vw+hero)/2+gap;let x=margin+Math.random()*maxX,tries=0;while(x>left&&x<right&&tries<8){x=margin+Math.random()*maxX;tries++}if(x>left&&x<right)x=Math.random()<0.5?margin:vw-margin-label;const y=margin+Math.random()*maxY;return{x,y}}
    async function drop(){await refresh();if(!coins.length){setTimeout(drop,6000);return}const pick=coins[Math.random()*coins.length|0];const price=priceMap[pick.id]?.usd;if(price!==undefined){const span=document.createElement('span');span.className='quote';span.textContent=`${pick.sym} ${fmt(price)}`;const pos=safe();span.style.left=`${pos.x}px`;span.style.top=`${pos.y}px`;box.appendChild(span);setTimeout(()=>span.remove(),6000)}setTimeout(drop,6000)}
    drop();
  })();
  </script>
</body>
</html>
